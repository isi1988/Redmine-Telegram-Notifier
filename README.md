# Redmine Telegram Notifier

–ü–ª–∞–≥–∏–Ω –¥–ª—è Redmine 6.1+, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∑–∞–¥–∞—á.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∑–∞–¥–∞—á
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å—Ç–∞—Ç—É—Å–∞, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞, –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- ‚úÖ –ü—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –∑–∞–¥–∞—á–∏ –≤ Redmine
- ‚úÖ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π —Å HTML
- ‚úÖ –ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–∏–ø–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ –∞–¥–º–∏–Ω–∫–∏

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Redmine 6.0.0 –∏–ª–∏ –≤—ã—à–µ
- Ruby 2.7 –∏–ª–∏ –≤—ã—à–µ
- Telegram Bot Token

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø–ª–∞–≥–∏–Ω–æ–≤ Redmine:
```bash
cd /path/to/redmine/plugins
```

2. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone https://github.com/yourusername/redmine_telegram_notifier.git
```

3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è):
```bash
cd /path/to/redmine
bundle install
```

4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Redmine:
```bash
sudo systemctl restart redmine  # –∏–ª–∏ –¥—Ä—É–≥–∞—è –∫–æ–º–∞–Ω–¥–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–∞—à–µ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Bot

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞–π–¥–∏—Ç–µ [@BotFather](https://t.me/BotFather)
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/newbot`
3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–∞
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π **Bot Token** (—Ñ–æ—Ä–º–∞—Ç: `1234567890:ABCdefGHIjklMNOpqrsTUVwxyz`)

### –®–∞–≥ 2: –ü–æ–ª—É—á–µ–Ω–∏–µ Chat ID

#### –î–ª—è –ª–∏—á–Ω–æ–≥–æ —á–∞—Ç–∞:
1. –ù–∞–ø–∏—à–∏—Ç–µ –±–æ—Ç—É –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
2. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getUpdates
```
3. –ù–∞–π–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ `"chat":{"id":123456789}`

#### –î–ª—è –≥—Ä—É–ø–ø—ã –∏–ª–∏ –∫–∞–Ω–∞–ª–∞:
1. –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ –≥—Ä—É–ø–ø—É/–∫–∞–Ω–∞–ª
2. –î–∞–π—Ç–µ –±–æ—Ç—É –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–¥–ª—è –∫–∞–Ω–∞–ª–æ–≤)
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø—É/–∫–∞–Ω–∞–ª
4. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getUpdates
```
5. –ù–∞–π–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ `"chat":{"id":-1001234567890}`

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–±:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ [@getidsbot](https://t.me/getidsbot) - –¥–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ –≥—Ä—É–ø–ø—É –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è ID

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–ª–∞–≥–∏–Ω–∞ –≤ Redmine

1. –í–æ–π–¥–∏—Ç–µ –≤ Redmine –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Üí –ü–ª–∞–≥–∏–Ω—ã**
3. –ù–∞–π–¥–∏—Ç–µ **Redmine Telegram Notifier** –∏ –Ω–∞–∂–º–∏—Ç–µ **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å**
4. –í–≤–µ–¥–∏—Ç–µ **Bot Token** –∏ **Chat ID**
5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ç–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:
   - –£–≤–µ–¥–æ–º–ª—è—Ç—å –æ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–¥–∞—á
   - –£–≤–µ–¥–æ–º–ª—è—Ç—å –æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∑–∞–¥–∞—á
   - –£–≤–µ–¥–æ–º–ª—è—Ç—å –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞
   - –£–≤–µ–¥–æ–º–ª—è—Ç—å –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞
   - –£–≤–µ–¥–æ–º–ª—è—Ç—å –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è
6. –ù–∞–∂–º–∏—Ç–µ **–°–æ—Ö—Ä–∞–Ω–∏—Ç—å**
7. –ù–∞–∂–º–∏—Ç–µ **–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

## –§–æ—Ä–º–∞—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–¥–∞—á–∏:
```
üÜï –°–æ–∑–¥–∞–Ω–∞ –Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞

üìã –û—à–∏–±–∫–∞ #1234: –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

üë§ –ê–≤—Ç–æ—Ä: –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤
üìä –°—Ç–∞—Ç—É—Å: –ù–æ–≤–∞—è
üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –í—ã—Å–æ–∫–∏–π
üë∑ –ù–∞–∑–Ω–∞—á–µ–Ω–∞: –ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤
üìÅ –ü—Ä–æ–µ–∫—Ç: –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π –ø–æ—Ä—Ç–∞–ª

üìù –û–ø–∏—Å–∞–Ω–∏–µ:
–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –º–æ–≥—É—Ç –≤–æ–π—Ç–∏...

üîó –û—Ç–∫—Ä—ã—Ç—å –∑–∞–¥–∞—á—É
```

### –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏:
```
‚úèÔ∏è –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∑–∞–¥–∞—á–∞

üìã –û—à–∏–±–∫–∞ #1234: –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

üë§ –ò–∑–º–µ–Ω–∏–ª: –ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤

üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:
–ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ OAuth...

–ò–∑–º–µ–Ω–µ–Ω–∏—è:
üìä –°—Ç–∞—Ç—É—Å: –ù–æ–≤–∞—è ‚Üí –í —Ä–∞–±–æ—Ç–µ
üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –í—ã—Å–æ–∫–∏–π ‚Üí –°—Ä–µ–¥–Ω–∏–π

üîó –û—Ç–∫—Ä—ã—Ç—å –∑–∞–¥–∞—á—É
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–ª–∞–≥–∏–Ω–∞

```
redmine_telegram_notifier/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ controllers/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ telegram_notifier_controller.rb
‚îÇ   ‚îî‚îÄ‚îÄ views/
‚îÇ       ‚îî‚îÄ‚îÄ settings/
‚îÇ           ‚îî‚îÄ‚îÄ _telegram_notifier_settings.html.erb
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ routes.rb
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îî‚îÄ‚îÄ redmine_telegram_notifier/
‚îÇ       ‚îú‚îÄ‚îÄ hooks.rb
‚îÇ       ‚îî‚îÄ‚îÄ telegram_service.rb
‚îú‚îÄ‚îÄ init.rb
‚îî‚îÄ‚îÄ README.md
```

## –û—Ç–ª–∞–¥–∫–∞

–ï—Å–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **–õ–æ–≥–∏ Redmine:**
```bash
tail -f /path/to/redmine/log/production.log
```

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ Bot Token:**
```bash
curl "https://api.telegram.org/bot<YOUR_TOKEN>/getMe"
```

3. **–¢–µ—Å—Ç–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è:**
```bash
curl -X POST "https://api.telegram.org/bot<YOUR_TOKEN>/sendMessage" \
  -H "Content-Type: application/json" \
  -d '{"chat_id": "<YOUR_CHAT_ID>", "text": "Test message"}'
```

4. **–¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
   - –ë–æ—Ç –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ –≥—Ä—É–ø–ø—É/–∫–∞–Ω–∞–ª
   - –£ –±–æ—Ç–∞ –Ω–µ—Ç –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –≤ –∫–∞–Ω–∞–ª–µ
   - –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç Chat ID (–¥–ª—è –≥—Ä—É–ø–ø –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `-100`)
   - Firewall –±–ª–æ–∫–∏—Ä—É–µ—Ç –∏—Å—Ö–æ–¥—è—â–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∫ api.telegram.org

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ö–æ—Å—Ç–∞ –∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞

–î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å—Å—ã–ª–æ–∫ –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è—Ö –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –≤ Redmine:

**–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –û–±—â–∏–µ:**
- **–ü—Ä–æ—Ç–æ–∫–æ–ª:** `https` (–∏–ª–∏ `http`)
- **–ò–º—è —Ö–æ—Å—Ç–∞:** `redmine.your-domain.com`

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
- –¢–∞–π–º–∞—É—Ç –Ω–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ: 5 —Å–µ–∫—É–Ω–¥
- –¢–∞–π–º–∞—É—Ç –Ω–∞ —á—Ç–µ–Ω–∏–µ: 5 —Å–µ–∫—É–Ω–¥
- –ü—Ä–∏ –æ—à–∏–±–∫–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–¥–∞—á–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è

–î–ª—è –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—á–µ—Ä–µ–¥—å —Å–æ–æ–±—â–µ–Ω–∏–π (Sidekiq, Delayed Job).

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- Bot Token —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö Redmine –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ (—á–µ—Ä–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–ª–∞–≥–∏–Ω–∞)
- –î–æ—Å—Ç—É–ø –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º –ø–ª–∞–≥–∏–Ω–∞ –∏–º–µ—é—Ç —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã
- –í—Å–µ HTTP-–∑–∞–ø—Ä–æ—Å—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ HTTPS

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## –ê–≤—Ç–æ—Ä

Your Name
- GitHub: [@yourusername](https://github.com/yourusername)
- Email: your.email@example.com

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è:
- –°–æ–∑–¥–∞–π—Ç–µ [Issue](https://github.com/yourusername/redmine_telegram_notifier/issues)
- –û—Ç–ø—Ä–∞–≤—å—Ç–µ Pull Request

## Changelog

### v1.0.0 (2024)
- –ü–µ—Ä–≤—ã–π —Ä–µ–ª–∏–∑
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∑–∞–¥–∞—á
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–∏–ø–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π HTML
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏–∑ –∞–¥–º–∏–Ω–∫–∏
